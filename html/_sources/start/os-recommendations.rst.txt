==============
 推荐操作系统
==============

Ceph 依赖
=========

按常规来说，我们建议在较新的 Linux 发行版上部署 Ceph ；同样，\
要选择长期支持的版本。


Linux 内核
----------

- **Ceph 内核态客户端**

  如果你在用内核客户端映射 RBD 块设备或挂载 CephFS ，那么一般\
  来说，内核客户端机器应该使用由 http://kernel.org 或者发行版\
  提供的“稳定”或者是“长期维护的”内核系列。

  对于 RBD ，如果你想\ *紧跟*\ 长期内核，当前，我们建议用基于
  4.x 的“长期维护”内核系列：

  - 4.19.z
  - 4.14.z

  对于 CephFS ，选择内核版本时可参考\ `CephFS 最佳实践`_\ 。

  较老的内核客户端可能不支持你的 `CRUSH 可调值`_\ 配置、或
  Ceph 集群其它比较新的功能，这样的话，就得关闭存储集群上的\
  这些功能。


.. _Platforms:

系统平台
========

下面的表格展示了 Ceph 对各种 Linux 发行版的依赖对应关系。一般\
来说， Ceph 对内核和系统初始化软件包（如 sysvinit 、 upstart 、
systemd ）的依赖很少。

Luminous (12.2.z)
-----------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 7        | N/A                | linux-3.10.0 | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 8.0      | Jessie             | linux-3.16.0 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 9.0      | Stretch            | linux-4.9    | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 22       | N/A                | linux-3.14.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 16.04    | Xenial Xerus       | linux-4.4.0  | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+

Jewel (10.2.z)
--------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    | 
+==========+==========+====================+==============+=========+============+
| CentOS   | 7        | N/A                | linux-3.10.0 | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 8.0      | Jessie             | linux-3.16.0 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 22       | N/A                | linux-3.14.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+

Hammer (0.94.z)
---------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    | 
+==========+==========+====================+==============+=========+============+
| CentOS   | 6        | N/A                | linux-2.6.32 | 1, 2    |            |
+----------+----------+--------------------+--------------+---------+------------+
| CentOS   | 7        | N/A                | linux-3.10.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 7.0      | Wheezy             | linux-3.2.0  | 1, 2    |            |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 12.04    | Precise Pangolin   | linux-3.2.0  | 1, 2    |            |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+

Firefly (0.80.z)
----------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    | 
+==========+==========+====================+==============+=========+============+
| CentOS   | 6        | N/A                | linux-2.6.32 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| CentOS   | 7        | N/A                | linux-3.10.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 7.0      | Wheezy             | linux-3.2.0  | 1, 2    | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 19       | Schrödinger's Cat  | linux-3.10.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 20       | Heisenbug          | linux-3.14.0 |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 6        | Santiago           | linux-2.6.32 | 1, 2    | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 12.04    | Precise Pangolin   | linux-3.2.0  | 1, 2    | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+


.. _Notes:

附注
----

- **1**: 默认内核的 ``btrfs`` 版本较老，不推荐用于 ``ceph-osd``
  存储节点；我们建议用 ``XFS`` 。

- **2**: 默认内核带的 Ceph 客户端较老，不推荐做内核空间客户端\
  （内核 RBD 或 Ceph 文件系统），请升级到推荐内核。

- **3**: 使用 ``btrfs`` 文件系统时，默认内核经常过不了质量检\
  验。所以我们不建议在后端 OSD 上用 ``btrfs`` 。


.. _Testing:

测试版
------

- **B**: 我们会为此平台构建发布包。对其中的某些平台，可能也会\
  持续地编译所有分支、做基本单元测试。

- **I**: 我们在这个平台上做基本的安装和功能测试。

- **C**: 我们在这个平台上持续地做全面的功能、退化、压力测试，\
  包括开发分支、预发布版本、正式发布版本。


.. _CRUSH 可调值: ../../rados/operations/crush-map#tunables
.. _CephFS 最佳实践: ../../cephfs/best-practices
