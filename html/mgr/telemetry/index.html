

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Telemetry Module &mdash; Ceph Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="iostat" href="../iostat/" />
    <link rel="prev" title="Telegraf Module" href="../telegraf/" /> 
</head>

<body class="wy-body-for-nav">

   
  <header class="top-bar">
    <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../">Ceph 管理器守护进程</a></li>
      <li class="breadcrumb-item active">Telemetry Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/mgr/telemetry.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
  </header>
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #eee" >
          

          
            <a href="../../" class="icon icon-home"> Ceph
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 管理器守护进程</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../administrator/">安装和配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/">模块编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestrator_modules/">编写 orchestrator 插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dashboard/">仪表盘模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ceph_api/">Ceph RESTful API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alerts/">Alerts 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../diskprediction/">DiskPrediction 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../localpool/">localpool 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prometheus/">Prometheus 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../influx/">Influx 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hello/">Hello 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../telegraf/">Telegraf 模块</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Telemetry 模块</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#channels">Channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-telemetry">Enabling Telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-report">Sample report</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collections">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interval">Interval</a></li>
<li class="toctree-l3"><a class="reference internal" href="#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manually-sending-telemetry">Manually sending telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sending-telemetry-through-a-proxy">Sending telemetry through a proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contact-and-description">Contact and Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leaderboard">Leaderboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../iostat/">Iostat 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crash/">Crash 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../insights/">Insights 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestrator/">Orchestrator 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rook/">Rook 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rgw/">RGW 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mds_autoscaler/">MDS Autoscaler 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs/">NFS 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smb/">SMB module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../progress/">Progress 模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli_api/">CLI API 命令模块</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../monitoring/">监控概览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crimson/crimson/">Crimson (Tech Preview)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware-monitoring/">硬件监控</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jaegertracing/">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation_cn/">中文版翻译资源</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Ceph</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<div id="dev-warning" class="admonition note">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="padding: 5px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="telemetry-module">
<span id="telemetry"></span><h1>Telemetry Module<a class="headerlink" href="#telemetry-module" title="Permalink to this heading"></a></h1>
<p>The telemetry module sends anonymous data about the cluster back to the
developers to report how Ceph is used and to report problems experienced by
users.</p>
<p>This data is visualized on the <a class="reference external" href="https://telemetry-public.ceph.com/">public dashboards</a> that allow the community to see a
summary of statistics including how many clusters are reporting, their total
capacity and OSD count, and version distribution trends.</p>
<section id="channels">
<h2>Channels<a class="headerlink" href="#channels" title="Permalink to this heading"></a></h2>
<p>The telemetry report is broken down into several “channels”, each with a
different type of information. When telemetry is enabled, individual channels
can be turned on and off. (If telemetry is disabled, the per-channel setting
has no effect.)</p>
<ul>
<li><p><strong>basic</strong> (default: on): Basic information about the cluster</p>
<blockquote>
<div><ul class="simple">
<li><p>capacity of the cluster</p></li>
<li><p>number of Monitors, Managers, OSDs, MDSs, object gateways, or other
daemons</p></li>
<li><p>software version currently being used</p></li>
<li><p>number and types of RADOS pools and CephFS file systems</p></li>
<li><p>names of configuration options that have been changed from their
default (but <em>not</em> their values)</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>crash</strong> (default: on): Information about daemon crashes, including</p>
<blockquote>
<div><ul class="simple">
<li><p>type of daemon</p></li>
<li><p>version of the daemon</p></li>
<li><p>operating system (OS distribution, kernel version)</p></li>
<li><p>stack trace, identifying where in the Ceph code the crash occurred</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>device</strong> (default: on): Information about device metrics, including</p>
<blockquote>
<div><ul class="simple">
<li><p>anonymized SMART metrics</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>ident</strong> (default: off): User-provided identifying information about
the cluster</p>
<blockquote>
<div><ul class="simple">
<li><p>cluster description</p></li>
<li><p>contact email address</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>perf</strong> (default: off): Various performance metrics of a cluster, which can
be used to</p>
<blockquote>
<div><ul class="simple">
<li><p>reveal overall cluster health</p></li>
<li><p>identify workload patterns</p></li>
<li><p>troubleshoot issues with latency, throttling, memory management, etc.</p></li>
<li><p>monitor cluster performance by daemon</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The reported data does <em>not</em> contain any sensitive data. This means that the
reported data does not include pool names, object names, object contents,
hostnames, or device serial numbers.</p>
<p>The reported data contains counters and statistics pertaining to how the
cluster has been deployed, the version of Ceph, the OS distribution, and other
parameters that help the project develop a better understanding of the way Ceph
is used.</p>
<p>Data is sent secured to
<a class="reference external" href="https://telemetry.ceph.com">https://telemetry.ceph.com</a>.</p>
<p>Individual channels can be enabled or disabled by running the following
commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "# ";
}
</style><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>basic</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>crash</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>device</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>ident</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>perf</span>
<span class="prompt1"></span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>basic</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>crash</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>device</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>ident</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>perf</span>
</pre></div></div><p>Multiple channels can be enabled or disabled at the same time by running
commands of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>basic<span class="w"> </span>crash<span class="w"> </span>device<span class="w"> </span>ident<span class="w"> </span>perf</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>basic<span class="w"> </span>crash<span class="w"> </span>device<span class="w"> </span>ident<span class="w"> </span>perf</span>
</pre></div></div><p>All channels can be enabled or disabled at once by running the following
commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>all</span>
<span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>disable<span class="w"> </span>channel<span class="w"> </span>all</span>
</pre></div></div><p>Note that telemetry must be enabled for these commands to take effect.</p>
<p>List all channels with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>channel<span class="w"> </span>ls</span>
</pre></div></div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NAME      ENABLED    DEFAULT    DESC
basic     ON         ON         Share basic cluster information (size, version)
crash     ON         ON         Share metadata about Ceph daemon crashes (version, stack straces, etc)
device    ON         ON         Share device health metrics (e.g., SMART data, minus potentially identifying info like serial numbers)
ident     OFF        OFF        Share a user-provided description and/or contact email for the cluster
perf      ON         OFF        Share various performance metrics of a cluster
</pre></div>
</div>
</section>
<section id="enabling-telemetry">
<h2>Enabling Telemetry<a class="headerlink" href="#enabling-telemetry" title="Permalink to this heading"></a></h2>
<p>To allow the <em>telemetry</em> module to share data, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>on</span>
</pre></div></div><p>Please note: Telemetry data is licensed under the <a class="reference external" href="https://cdla.io/sharing-1-0/">Community Data License
Agreement - Sharing - Version 1.0</a>.  This means
that telemetry module can be enabled only after you add <code class="docutils literal notranslate"><span class="pre">--license</span>
<span class="pre">sharing-1-0</span></code> to the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">telemetry</span> <span class="pre">on</span></code> command. After telemetry is on,
consider enabling channels which are off by default, such as the
<code class="docutils literal notranslate"><span class="pre">perf</span></code> channel.  <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">telemetry</span> <span class="pre">on</span></code> output will list the exact command to
enable these channels.</p>
<p>Telemetry can be disabled at any time by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>off</span>
</pre></div></div></section>
<section id="sample-report">
<h2>Sample report<a class="headerlink" href="#sample-report" title="Permalink to this heading"></a></h2>
<p>Show reported data by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>show</span>
</pre></div></div><p>If telemetry is disabled, run the following command to preview a sample report:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>preview</span>
</pre></div></div><p>The generation of a sample report for larger clusters might take some time.</p>
<p>To protect sensitive information, device reports are generated separately. Data
including  hostnames and device serial numbers are anonymized. The device
telemetry is sent to a different endpoint and does not associate the device
data with a particular cluster. To see a preview of the device report, run the
following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>show-device</span>
</pre></div></div><p>If telemetry is disabled, run the following command to preview a sample device
report:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>preview-device</span>
</pre></div></div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">smartmontools</span></code> version 7.0 or later must be installed so that JSON
output can be specified and parsed. If you have any concerns about privacy
with regard to the information included in this report, contact the Ceph
developers.</p>
</div>
<p>When telemetry is enabled, run the following command to generate both reports
in a single output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>show-all</span>
</pre></div></div><p>When telemetry is disabled, run the following command to view both reports in a
single output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>preview-all</span>
</pre></div></div><p><strong>Sample report by channel</strong></p>
<p>Run the following command when telemetry is enabled to show the data reported
by a specified channel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>show<span class="w"> </span>&lt;channel_name&gt;</span>
</pre></div></div><p>Please note: If telemetry is on, and <code class="docutils literal notranslate"><span class="pre">&lt;channel_name&gt;</span></code> is disabled, the
command above will output a sample report by that channel, according to the
collections the user is enrolled to. However this data is not reported, since
the channel is disabled.</p>
<p>If telemetry is off you can preview a sample report by channel with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>preview<span class="w"> </span>&lt;channel_name&gt;</span>
</pre></div></div></section>
<section id="collections">
<h2>Collections<a class="headerlink" href="#collections" title="Permalink to this heading"></a></h2>
<p>Collections represent different aspects of data collected within a
channel.</p>
<p>To list all collections, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>collection<span class="w"> </span>ls</span>
</pre></div></div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NAME                            STATUS                                               DESC
basic_base                      NOT REPORTING: NOT OPTED-IN                          Basic information about the cluster (capacity, number and type of daemons, version, etc.)
basic_mds_metadata              NOT REPORTING: NOT OPTED-IN                          MDS metadata
basic_pool_flags                NOT REPORTING: NOT OPTED-IN                          Per-pool flags
basic_pool_options_bluestore    NOT REPORTING: NOT OPTED-IN                          Per-pool bluestore config options
basic_pool_usage                NOT REPORTING: NOT OPTED-IN                          Default pool application and usage statistics
basic_rook_v01                  NOT REPORTING: NOT OPTED-IN                          Basic Rook deployment data
basic_stretch_cluster           NOT REPORTING: NOT OPTED-IN                          Stretch mode information for stretch clusters
basic_usage_by_class            NOT REPORTING: NOT OPTED-IN                          Default device class usage statistics
crash_base                      NOT REPORTING: NOT OPTED-IN                          Information about daemon crashes (daemon type and version, backtrace, etc.)
device_base                     NOT REPORTING: NOT OPTED-IN                          Information about device health metrics
ident_base                      NOT REPORTING: NOT OPTED-IN, CHANNEL ident IS OFF    User-provided identifying information about the cluster
perf_memory_metrics             NOT REPORTING: NOT OPTED-IN, CHANNEL perf IS OFF     Heap stats and mempools for mon and mds
perf_perf                       NOT REPORTING: NOT OPTED-IN, CHANNEL perf IS OFF     Information about performance counters of the cluster
</pre></div>
</div>
<p>Where:</p>
<dl class="simple glossary">
<dt id="term-NAME">NAME<a class="headerlink" href="#term-NAME" title="Permalink to this term"></a></dt><dd><p>Collection name. The prefix indicates the channel to which the
collection belongs.</p>
</dd>
<dt id="term-STATUS">STATUS<a class="headerlink" href="#term-STATUS" title="Permalink to this term"></a></dt><dd><p>Indicates whether the collection metrics are reported. This is
determined by the status (<code class="docutils literal notranslate"><span class="pre">enabled</span></code> or <code class="docutils literal notranslate"><span class="pre">disabled</span></code>) to which
the channel of the collection belongs, along with the
enrollment status of the collection (whether the user is
opted-in to this collection).</p>
</dd>
<dt id="term-DESC">DESC<a class="headerlink" href="#term-DESC" title="Permalink to this term"></a></dt><dd><p>General description of the collection.</p>
</dd>
</dl>
<p>To display any difference between the currenty-enrolled collections and any new
or available collections, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>diff</span>
</pre></div></div><p>To enroll to the most recent collections, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>on</span>
</pre></div></div><p>Enable a new channel that is currently disabled by running a command of the
following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>channel<span class="w"> </span>&lt;channel_name&gt;</span>
</pre></div></div></section>
<section id="interval">
<h2>Interval<a class="headerlink" href="#interval" title="Permalink to this heading"></a></h2>
<p>The telemetry module compiles and sends a new report every 24 hours by default.
Adjust this interval by running a command of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/interval<span class="w"> </span><span class="m">72</span><span class="w">    </span><span class="c1"># report every three days</span></span>
</pre></div></div></section>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Permalink to this heading"></a></h2>
<p>To print the current configuration of the telemetry module, run a command of
the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>status</span>
</pre></div></div></section>
<section id="manually-sending-telemetry">
<h2>Manually sending telemetry<a class="headerlink" href="#manually-sending-telemetry" title="Permalink to this heading"></a></h2>
<p>To send an ansynchronous, one-time set of telemetry data, run the following
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>telemetry<span class="w"> </span>send</span>
</pre></div></div><p>If telemetry has not been enabled (by running the command <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">telemetry</span>
<span class="pre">on</span></code>), add <code class="docutils literal notranslate"><span class="pre">--license</span> <span class="pre">sharing-1-0</span></code> to the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">telemetry</span> <span class="pre">send</span></code> command.</p>
</section>
<section id="sending-telemetry-through-a-proxy">
<h2>Sending telemetry through a proxy<a class="headerlink" href="#sending-telemetry-through-a-proxy" title="Permalink to this heading"></a></h2>
<p>If the cluster cannot directly connect to the configured telemetry
endpoint (default: <code class="docutils literal notranslate"><span class="pre">telemetry.ceph.com</span></code>), configure an HTTP/HTTPS
proxy server by running a command of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/proxy<span class="w"> </span>https://10.0.0.1:8080</span>
</pre></div></div><p>Include a colon-separated user and password (<code class="docutils literal notranslate"><span class="pre">user:pass</span></code>) if needed by
running a command of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/proxy<span class="w"> </span>https://ceph:telemetry@10.0.0.1:8080</span>
</pre></div></div></section>
<section id="contact-and-description">
<h2>Contact and Description<a class="headerlink" href="#contact-and-description" title="Permalink to this heading"></a></h2>
<p>A contact and description can be added to the report. This is optional and is
disabled by default. Run commands of the following forms to add contacts and
descriptions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/contact<span class="w"> </span><span class="s1">&#39;John Doe &lt;john.doe@example.com&gt;&#39;</span></span>
<span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/description<span class="w"> </span><span class="s1">&#39;My first Ceph cluster&#39;</span></span>
<span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/channel_ident<span class="w"> </span><span class="nb">true</span></span>
</pre></div></div></section>
<section id="leaderboard">
<h2>Leaderboard<a class="headerlink" href="#leaderboard" title="Permalink to this heading"></a></h2>
<p>To participate in a leaderboard in the <a class="reference external" href="https://telemetry-public.ceph.com/">public dashboards</a>, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/leaderboard<span class="w"> </span><span class="nb">true</span></span>
</pre></div></div><p>The leaderboard displays basic information about the cluster. This includes the
cluster’s total storage capacity and the number of OSDs. To add a description
of the cluster so that it can more easily be identified on the leaderboard, run
a command of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>mgr<span class="w"> </span>mgr/telemetry/leaderboard_description<span class="w"> </span><span class="s1">&#39;Ceph cluster for Computational Biology at the University of XYZ&#39;</span></span>
</pre></div></div><p>If the <code class="docutils literal notranslate"><span class="pre">ident</span></code> channel is enabled, its details will not be displayed in the
leaderboard.</p>
</section>
</section>



<div id="support-the-ceph-foundation" class="admonition note">
  <p class="first admonition-title">Brought to you by the Ceph Foundation</p>
  <p class="last">The Ceph Documentation is a community resource funded and hosted by the non-profit <a href="https://ceph.io/en/foundation/">Ceph Foundation</a>. If you would like to support this and our other efforts, please consider <a href="https://ceph.io/en/foundation/join/">joining now</a>.</p>
</div>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../telegraf/" class="btn btn-neutral float-left" title="Telegraf Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../iostat/" class="btn btn-neutral float-right" title="iostat" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).</p>
  </div>

   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>